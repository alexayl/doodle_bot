<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>DoodleBot CV</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; }
    header { background:#111; color:#fff; padding:12px 20px; display:flex; gap:16px; align-items:center; }
    a.nav { color:#fff; text-decoration:none; padding:6px 10px; border-radius:6px; background:#333; }
    a.nav.active { background:#4a90e2; }
    main { max-width: 960px; margin: 24px auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.1); }
    .stream { display:flex; justify-content:center; }
    .error { color:#b00020; margin: 8px 0; }
    form { margin: 16px 0; }
    button { padding:8px 12px; border:0; border-radius:8px; background:#4a90e2; color:#fff; cursor:pointer; }
  </style>
</head>
<body>
<header>
  <div style="font-weight:bold;">DoodleBot CV</div>
  <a class="nav {{ 'active' if page=='home' else '' }}" href="{{ url_for('home') }}">Home</a>
  <a class="nav {{ 'active' if page=='erase' else '' }}" href="{{ url_for('erase') }}">Erase Mode</a>
  <a class="nav {{ 'active' if page=='draw' else '' }}" href="{{ url_for('draw') }}">Draw Mode</a>
</header>

<main>
  {% if page == 'home' %}
    <h2>Welcome</h2>
    <p>Choose a mode:</p>
    <p><a class="nav" href="{{ url_for('erase') }}">Erase Mode</a> or <a class="nav" href="{{ url_for('draw') }}">Draw Mode</a></p>

  {% elif page == 'erase' %}
    <h2>Erase Mode â€” Live Stream</h2>
    <div class="stream">
      <img src="{{ url_for('stream') }}" alt="Live stream"/>
    </div>

  {% elif page == 'draw' %}
    <h2>Draw Mode</h2>
    {% if error %}<div class="error">{{ error }}</div>{% endif %}

    {% if not has_target %}
      <p>Upload a target image, then the stream will start.</p>
      <form action="{{ url_for('draw') }}" method="post" enctype="multipart/form-data">
        <input type="file" name="file" accept="image/*" required>
        <button type="submit">Upload & Start</button>
      </form>
    {% else %}
      <p>Target loaded: <strong>{{ target }}</strong></p>
      <div class="stream">
        <img src="{{ url_for('stream') }}" alt="Live stream"/>
      </div>
    {% endif %}
  {% endif %}
</main>
</body>
</html>
